! <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-loading-overlay@5.0.3/dist/vue-loading.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/vue-loading-overlay@5.0.3/dist/vue-loading.css" rel="stylesheet">
    <title>Document</title>
    <style>
        .product-image{
            padding-bottom: 100%;
        }
    </style>
</head>
<body>
    <div id="app">
        <ul class="prolist flex flex-wrap max-w-screen-xl mx-auto">
            <li class="w-1/5 px-2 mb-4" v-for="product in productList" :key="product.id">
                <div class="p-3 bg-gray-200">
                    <div class="product-image w-full bg-cover" :style="{backgroundImage:`url( ${product.imageUrl} )`}"></div>
                    <p class="font-bold text-gray-700 text-xl py-3">{{ product.title }}</p>
                    <div class="flex justify-between">
                        <button type="button" class="bg-gray-500  text-white focus:ring-4 focus:ring-gray-300 rounded border border-gray-200 text-sm font-bold px-4 py-2 focus:z-10  hover:bg-gray-600" @click="viewDetail(product.id)">詳細介紹</button>
                        <button type="button" class="bg-blue-500  text-white focus:ring-4 focus:ring-gray-300 rounded border border-gray-200 text-sm font-bold px-4 py-2 focus:z-10  hover:bg-blue-600">加入購物車</button>
                    </div>
                </div>
                
            </li>
        </ul>
        <product-detail ref="detailModal" :id="productID"></product-detail>
        <loading v-model:active="isLoading" />
    </div>
    
</body>


<script type="module">
    // import { createApp } from 'https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.26/vue.esm-browser.min.js';
    import  productDetail  from './product-detail.js';

    const app = Vue.createApp({
        data(){
            return{
                apiUrl : 'https://vue3-course-api.hexschool.io/v2' ,
                apiPath : 'nd5726-hexschool',
                tempProduct:[],
                productList : [],
                productID : '',
                isLoading :false
            }
        },
        methods :{
            getProduct(){
                axios.get(`${this.apiUrl}/api/${this.apiPath}/products/all`)
                .then((res)=>{
                    //console.log(res.data);
                    this.productList = res.data.products;
                })
                .catch((err)=>{
                    
                })
            },
            viewDetail(id){
                this.productID = id ;
                this.isLoading = true ;
                setTimeout(()=>{
                    this.$refs.detailModal.open_detail = true ;
                    this.isLoading = false ;
                },1000)
            }
        },
        mounted(){
            this.getProduct();
            console.log(VueLoading);
        }
    })
    app.component('productDetail', productDetail );
    app.component('loading', VueLoading.Component)
    app.mount('#app');

</script>


</html>